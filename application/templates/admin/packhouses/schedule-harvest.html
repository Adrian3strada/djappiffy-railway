<!--Orden de Corte-->
{% extends "admin/packhouses/header-footer.html" %}
{% load i18n %}

{% block page_content %}
{% load static %}

<style>

.title{
        display: flex;
        background-color: #ffc600;
        width: 100%;
        height: 30px;
        justify-content: center;
        align-items: center;
        text-align: center;
        h2{
            font-size: 10pt;
        }
    }

.title-2{
    display: flex;
    background-color: #ffc600;
    width: 33%;
    height: 35px;
    padding-left: 2px;
    border-left: 10px solid #123782;  
    align-items: center;      
}

.info-container {
    display: flex;
    flex-direction: column;
    gap: 5px; 
    width: 100%;
}

.info-row {
    display: flex;
    gap: 5px;
    
}

.info-item {
    flex: 1; 
    border-bottom: 1px solid #000000; 
    text-align: left;
}

.info-table {
    width: 100%;
    border-collapse: collapse;
}

.transport-info-table{
    width: 100%;
    border-collapse: collapse;
    
}

.transport-info-table th, 
.transport-info-table td {
    border: 1px solid #000;
    text-align: left;
    min-height: 20px; 
    vertical-align: middle;
    padding-left: 3px;
}

.transport-info-table th {
    background-color: #fff4cc;
    vertical-align: middle;  
    border: 1px solid #000000;  
    min-height: 25px;
    line-height: 25px;        
    text-align: center;  
}

.transport-info-table tbody tr:nth-child(even) {
    background-color: #fffdf8; 
    min-height: 20px; 
    vertical-align: middle;
}

.crew-item {
    display: flex;
    justify-content: space-between;
    padding: 10px; 
    border: 1px solid #123782; 
    border-radius: 5px; 
    margin-bottom: 10px;
}

.provider, .crew {
    width: 48%; 
}

.print-container {
    margin-top: 20px;
    display: flex;
    width: 100%;
    height: 30%; 
    border: 2px solid #091941;
}

.qr-space {
    width: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border-right: 2px solid #091941;
}

.data-space {
    flex: 1;
    padding: 10px;
}

</style>

<div>
    <h2 class="title">General Information</h2>
</div>

<div>
    <div class="info-container">
        <div class="info-row">
            <div class="info-item">Harvest Date: {{harvest.harvest_date}}</div>
            <div class="info-item">Provider: {{harvest.product_provider}}</div>
            <div class="info-item">Category: {{harvest.category}}</div>
        </div>
    
        <div class="info-row">
            {% if harvest.category == 'gathering' %}
                <div class="info-item">Gatherer: {{ harvest.gatherer }}</div>
            {% elif harvest.category == 'maquila' %}
                <div class="info-item">Maquiladora: {{ harvest.maquiladora }}</div>
            {% else %}
                <div class="info-item">No Data</div>
            {% endif %}
            <div class="info-item">Product: {{harvest.product}}</div>
            <div class="info-item">Variety: {{harvest.product_variety}}</div>
        </div>
    
        <div class="info-row">
            <div class="info-item">Season: {{harvest.product_season_kind}}</div>
            <div class="info-item">Harvest Size: {{harvest.product_harvest_size_kind}}</div>
            <div class="info-item">Orchard: {{harvest.orchard}}</div>
        </div>
    
        <div class="info-row">
            <div class="info-item">Market: {{harvest.market}}</div>
            <div class="info-item">Expected Weight: {{harvest.weight_expected}} KG</div>
            <div class="info-item">Weight Scale: {{harvest.weighing_scale}}</div>
        </div>
    
        <div class="info-row">
            <div class="info-item">Meeting Point: {{harvest.meeting_point}}</div>
            <div class="info-item"></div> 
            <div class="info-item">Status: {{harvest.status}}</div>
        </div>
    </div>
</div>

<div>
    <h3 class="title-2">Crew Information</h3>
    <div class="crew-info">
        {% for item in scheduleharvestharvestingcrewinline %}
        <div class="crew-item">
            <div class="provider">
                <strong>Harvesting Crew Provider:</strong> {{ item.provider }}
            </div>
            <div class="crew">
                <strong>Crew:</strong> {{ item.harvesting_crew }}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div>
    <h3 class="title-2">Transport Information</h3>
    <table class="transport-info-table">
        <thead>
            <tr>
                <th style="width: 25%;">Vehicle/Crew Provider</th>
                <th style="width: 25%;">Vehicle</th>
                <th>Stamp Number</th>
                <th>Container</th>
                <th style="width: 10%; text-align: center;">Quantity</th>
            </tr>
        </thead>
        <tbody>
            {% for vehicle in scheduleharvestvehicleinline %}
            {% with vehicle.scheduleharvestcontainervehicle_set.all as containers %}
            <tr>
                <td rowspan="{{ containers|length }}">{{ vehicle.provider.name }}</td>
                <td rowspan="{{ containers|length }}">{{ vehicle.vehicle.name }}</td>
                <td rowspan="{{ containers|length }}">{{ vehicle.stamp_number }}</td>
    
                {% for container in containers %}
                {% if forloop.first %}
                    <td>{{ container.harvest_cutting_container.name }}</td>
                    <td style="text-align: center;">{{ container.quantity }}</td>
                </tr>
                {% else %}
                <tr>
                    <td>{{ container.harvest_cutting_container.name }}</td>
                    <td style="text-align: center;">{{ container.quantity }}</td>
                </tr>
                {% endif %}
                {% endfor %}
            {% endwith %}
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="print-container">
    <div class="qr-space">
       
    </div>

    <div class="data-space">
        <p><strong>Product:</strong>{{harvest.product}} </p>
        <p><strong>Product Variety: </strong>{{harvest.product_variety}}</p>
        <p><strong>Total of Boxes: </strong>{{total_box}}</p>
        <p><strong>Expected Weight: </strong>{{harvest.weight_expected}} KG</p>
    </div>
</div>


{% endblock page_content %}