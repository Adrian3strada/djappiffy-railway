<!--Orden de Corte-->
{% extends "admin/packhouses/header-footer.html" %}
{% load i18n %}

{% block page_content %}
{% load static %}

<style>
    table.header-table {
            margin-bottom: 0px !important;
        }
.title{
        display: flex;
        background-color: #ffc600;
        width: 100%;
        height: 30px;
        justify-content: center;
        align-items: center;
        text-align: center;
        margin-top: 0px;
        h2{
            font-size: 10pt;
        }
    }

.title-2{
    display: flex;
    background-color: #ffc600;
    width: 33%;
    height: 35px;
    padding-left: 2px;
    border-left: 10px solid #123782;  
    align-items: center;      
}

.info-container {
    display: flex;
    flex-direction: column;
    gap: 5px; 
    width: 100%;
}

.info-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: auto;
    font-size: 8pt;
}

.info-table td {
    border-bottom: 1px solid #000;
    vertical-align: bottom;
    text-align: left;
}

.label {
    white-space: nowrap;
    width: 1%;
    text-align: left;
}

.value {
    width: auto;
}



.transport-info-table{
    width: 100%;
    border-collapse: collapse;
    
}

.transport-info-table th, 
.transport-info-table td {
    border: 1px solid #000;
    text-align: left;
    min-height: 20px; 
    vertical-align: middle;
    padding-left: 3px;
}

.transport-info-table th {
    background-color: #fff4cc;
    vertical-align: middle;  
    border: 1px solid #000000;  
    min-height: 25px;
    line-height: 25px;        
    text-align: center;  
}

.transport-info-table tbody tr:nth-child(even) {
    background-color: #fffdf8; 
    min-height: 20px; 
    vertical-align: middle;
}

.crew-item {
    display: flex;
    justify-content: space-between;
    padding: 10px; 
    border: 1px solid #123782; 
    border-radius: 5px; 
    margin-bottom: 10px;
}

.provider, .crew {
    width: 48%; 
}

.print-container {
    margin-top: 20px;
    display: flex;
    width: 100%;
    height: 30%; 
    border: 2px solid #091941;
}

.qr-space {
    width: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border-right: 2px solid #091941;
}

.data-space {
    flex: 1;
    padding: 10px;
}

</style>

<div style="margin-top: 0px;">
    <h2 class="title">{% translate "General Information" %}</h2>
</div>

<div>
    <div class="info-container">
        <table class="info-table">
            <tbody>
                <tr>
                    <td class="label">{% translate "Harvest Date:" %}</td>
                    <td class="value">{{ harvest.harvest_date }}</td>
                
                    <td class="label">{% translate "Provider:" %}</td>
                    <td class="value">{{ harvest.product_provider }}</td>
                
                    <td class="label">{% translate "Category:" %}</td>
                    <td class="value">{{ harvest.get_category_display }}</td>
                </tr>                
    
                <tr>
                    {% if harvest.category == 'gathering' %}
                        <td class="label">{% translate "Gatherer:" %}</td>
                        <td class="value">{{ harvest.gatherer }}</td>
                    {% elif harvest.category == 'maquila' %}
                        <td class="label">{% translate "Maquiladora:" %}</td>
                        <td class="value">{{ harvest.maquiladora }}</td>
                    {% else %}
                        <td colspan="2"></td> 
                    {% endif %}
    
                    <td class="label">{% translate "Product:" %}</td>
                    <td>{{ harvest.product }}</td>
    
                    <td class="label">{% translate "Variety:" %}</td>
                    <td>{{ harvest.product_variety }}</td>
                </tr>
    
                <tr>
                    <td class="label">{% translate "Phenology:" %}</td>
                    <td class="value">{{ harvest.product_phenologies }}</td>
    
                    <td class="label">{% translate "Harvest Size:" %}</td>
                    <td class="value">{{ harvest.product_harvest_size_kind }}</td>
    
                    <td class="label">{% translate "Orchard:" %}</td>
                    <td class="value">{{ harvest.orchard }}</td>
                </tr>
    
                <tr>
                    <td class="label">{% translate "Market:" %}</td>
                    <td class="value">{{ harvest.market }}</td>
    
                    <td class="label">{% translate "Expected Weight:" %}</td>
                    <td class="value">{{ harvest.weight_expected }} KG</td>
    
                    <td class="label">{% translate "Weight Scale:" %}</td>
                    <td class="value">{{ harvest.weighing_scale }}</td>
                </tr>
    
                <tr>
                    <td class="label">{% translate "Meeting Point:" %}</td>
                    <td class="value">{{ harvest.meeting_point }}</td>
    
                    <td class="label"></td>
                    <td class="value"></td>
    
                    <td class="label">{% translate "Status:" %}</td>
                    <td class="value">{{ harvest.get_status_display }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    
</div>

<div>
    <h3 class="title-2">{% translate "Crew Information" %}</h3>
    <div class="crew-info">
        {% for item in scheduleharvestharvestingcrewinline %}
        <div class="crew-item">
            <div class="provider">
                <strong>{% translate "Harvesting Crew Provider:" %}</strong> {{ item.provider }}
            </div>
            <div class="crew">
                <strong>{% translate "Crew:" %}</strong> {{ item.harvesting_crew }}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div>
    <h3 class="title-2">{% translate "Transport Information" %}</h3>
    <table class="transport-info-table">
        <thead>
            <tr>
                <th style="width: 25%;">{% translate "Vehicle/Crew Provider" %}</th>
                <th style="width: 25%;">{% translate "Vehicle" %}</th>
                <th>{% translate "Stamp Number" %}</th>
                <th>{% translate "Container" %}</th>
                <th style="width: 10%; text-align: center;">{% translate "Quantity" %}</th>
            </tr>
        </thead>
        <tbody>
            {% for vehicle in scheduleharvestvehicleinline %}
                {% with containers=vehicle.scheduleharvestcontainervehicle_set.all %}
                {% with container_count=containers|length %}
                    <tr>
                    <td rowspan="{{ container_count|default:1 }}">{{ vehicle.provider.name }}</td>
                    <td rowspan="{{ container_count|default:1 }}">{{ vehicle.vehicle.name }}</td>
                    <td rowspan="{{ container_count|default:1 }}">{{ vehicle.stamp_number }}</td>
                    
                    {% if container_count > 0 %}
                        {% for container in containers %}
                            {% if forloop.first %}
                                <td>{{ container.harvest_container }}</td>
                                <td style="text-align: center;">{{ container.quantity }}</td>
                            </tr>
                            {% else %}
                            <tr>
                                <td>{{ container.harvest_container }}</td>
                                <td style="text-align: center;">{{ container.quantity }}</td>
                            </tr>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <td>&nbsp;</td>
                        <td style="text-align: center;">&nbsp;</td>
                    </tr>
                    {% endif %}
                {% endwith %}
                {% endwith %}
            {% endfor %}
        </tbody>
        
    </table>
</div>

<div class="print-container">
    <div class="qr-space">
       
    </div>

    <div class="data-space">
        <p><strong>{% translate "Product:" %}</strong>{{harvest.product}} </p>
        <p><strong>{% translate "Product Variety:" %} </strong>{{harvest.product_variety}}</p>
        <p><strong>{% translate "Total of Containers:" %} </strong>{{total_box}}</p>
        <p><strong>{% translate "Expected Weight:" %} </strong>{{harvest.weight_expected}} KG</p>
    </div>
</div>


{% endblock page_content %}